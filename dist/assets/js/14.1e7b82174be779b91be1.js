webpackJsonp([14],{"5bkS":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("eMjc"),a=e.n(i),n={components:{},data(){return{loginmsg:this.$t("common.logintip"),loading:!0,tableCardList:[],showModal:!1,cardNo:"",modal_loading:!1,showPromotionModal:!1,saveImageLoading:!1,promotionTitle:"",promotionCode:""}},methods:{getMyCardList(){this.$http.post(this.host+this.api.uc.mycardlist).then(t=>{var o=t.body;0==o.code?this.tableCardList=o.data:this.$Message.error(this.loginmsg),this.loading=!1})},dataURLToBlob(t){let o=t.split(","),e=o[0].match(/:(.*?);/)[1],i=atob(o[1]),a=i.length,n=new Uint8Array(a);for(;a--;)n[a]=i.charCodeAt(a);return new Blob([n],{type:e})},saveImage(){this.save("promotionImage","推广合伙人图片"),this.saveImageLoading=!0},save(t,o){let e=this.$refs[t],i=this,n=document.createElement("a");a()(e,{useCORS:!0}).then(t=>{let e=document.body.appendChild(t);e.style.display="none",n.style.display="none",document.body.removeChild(e);let a=i.dataURLToBlob(e.toDataURL("image/png"));n.setAttribute("href",URL.createObjectURL(a)),n.setAttribute("download",o+".png"),document.body.appendChild(n),n.click(),URL.revokeObjectURL(a),document.body.removeChild(n),this.saveImageLoading=!1})},exchangeCard(){this.showModal=!0},exchange(){if(""==this.cardNo||null==this.cardNo)return void this.$Message.error(this.$t("uc.promotion.inputcardno"));let t={};t.cardNo=this.cardNo,this.modal_loading=!0,this.$http.post(this.host+this.api.uc.exchangecard,t).then(t=>{var o=t.body;0==o.code?(this.showModal=!1,this.$Notice.success({title:this.$t("uc.promotion.exchangesuccess"),desc:o.message,duration:30})):this.$Message.error(o.message),this.modal_loading=!1})}},created(){this.getMyCardList()},computed:{tableColumnsCard(){let t=this,o=[];return o.push({title:this.$t("uc.promotion.card_column1"),key:"cardName",width:200,align:"center"}),o.push({title:this.$t("uc.promotion.card_column0"),key:"cardNo",width:150,align:"center"}),o.push({title:this.$t("uc.promotion.card_column2"),key:"unit",align:"center",render:(t,o)=>t("span",{},o.row.coin.unit)}),o.push({title:this.$t("uc.promotion.card_column3"),key:"amount",align:"center",render:(o,e)=>o("span",{attrs:{title:e.row.amount}},t.toFloor(e.row.amount||"0"))}),o.push({title:this.$t("uc.promotion.card_column5"),align:"center",render:(o,e)=>o("span",{attrs:{title:e.row.count}},t.toFloor(e.row.count||"0"))}),o.push({title:this.$t("uc.promotion.card_column6"),align:"center",render:(o,e)=>o("span",{attrs:{title:e.row.exchangeCount}},t.toFloor(e.row.exchangeCount||"0"))}),o.push({title:this.$t("uc.promotion.card_column7"),align:"center",width:170,render:(o,e)=>o("span",{attrs:{title:e.row.createTime}},t.toFloor(e.row.createTime||"0"))}),o.push({title:this.$t("uc.finance.money.operate"),key:"price1",align:"center",render:function(o,e){return o("Button",{props:{type:"info",size:"small"},on:{click:function(){t.showPromotionModal=!0,t.promotionTitle=e.row.cardName,t.promotionCode=e.row.cardNo,window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0}}},t.$t("uc.promotion.gopromotion"))}}),o}}},r={render:function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"nav-rights"},[i("div",{staticClass:"nav-right col-xs-12 col-md-10 padding-right-clear"},[i("div",{staticClass:"bill_box rightarea padding-right-clear"},[i("div",{staticClass:"shaow"},[i("div",{staticClass:"money_table"},[i("div",{staticStyle:{width:"100%",height:"50px"}},[i("div",{staticClass:"header-btn",on:{click:t.exchangeCard}},[t._v(t._s(t.$t("uc.promotion.exchangewithcode")))])]),t._v(" "),i("Table",{attrs:{columns:t.tableColumnsCard,data:t.tableCardList,loading:t.loading,"disabled-hover":!0}})],1)])])]),t._v(" "),i("Modal",{attrs:{title:this.$t("uc.promotion.inputcardno"),width:"360"},model:{value:t.showModal,callback:function(o){t.showModal=o},expression:"showModal"}},[i("p",{staticStyle:{color:"#f60","text-align":"left"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),i("span",[t._v(t._s(t.$t("uc.promotion.inputcardno")))])],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("Input",{attrs:{placeholder:this.$t("uc.promotion.inputcardno")},model:{value:t.cardNo,callback:function(o){t.cardNo=o},expression:"cardNo"}})],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:t.exchange}},[t._v(t._s(t.$t("uc.promotion.exchange")))])],1)]),t._v(" "),i("Drawer",{staticStyle:{"text-align":"center"},attrs:{title:t.promotionTitle,closable:!1,width:"350"},model:{value:t.showPromotionModal,callback:function(o){t.showPromotionModal=o},expression:"showPromotionModal"}},[i("div",{ref:"promotionImage",staticStyle:{position:"relative",width:"318px"},attrs:{id:"promotionImage"}},[i("img",{staticStyle:{width:"100%",display:"block"},attrs:{src:e("TuwN")}}),t._v(" "),i("p",{staticStyle:{position:"absolute",top:"210px","text-align":"center",width:"100%","font-size":"26px",color:"#F90","font-weight":"bold"}},[t._v(t._s(t.promotionCode))]),t._v(" "),i("p",{staticStyle:{position:"absolute",top:"250px","text-align":"center",width:"100%"}},[t._v("推广合伙人专属兑换码")])]),t._v(" "),i("p",{staticStyle:{"text-align":"center","font-size":"12px",color:"#888","margin-top":"10px"}},[t._v(t._s(t.$t("invite.imagetips")))]),t._v(" "),i("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"error",size:"large",loading:t.saveImageLoading,long:""},on:{click:t.saveImage}},[t._v(t._s(t.$t("invite.saveimage")))])],1)],1)},staticRenderFns:[]};var s=e("VU/8")(n,r,!1,function(t){e("Oyzm"),e("RKUi")},"data-v-7af383ea",null);o.default=s.exports},Oyzm:function(t,o){},RKUi:function(t,o){},TuwN:function(t,o,e){t.exports=e.p+"assets/img/promotionbg1.e2127a6.jpg"}});