webpackJsonp([4],{"7qpr":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("GnUe");var o=n("7t+N"),i=n.n(o),r={data(){return{country:"+86",captchaObj:null,_captchaResult:null,formInline:{user:"",password:""},ruleInline:{user:[{required:!0,message:this.$t("uc.login.loginvalidate"),trigger:"blur"}],password:[{required:!0,message:this.$t("uc.login.pwdvalidate1"),trigger:"blur"},{type:"string",min:6,message:this.$t("uc.login.pwdvalidate2"),trigger:"blur"}]}}},created:function(){this.init()},computed:{isLogin:function(){return this.$store.getters.isLogin}},methods:{init(){this.$store.commit("navigate","nav-other"),this.$store.state.HeaderActiveName="0",this.isLogin?this.$router.push("/uc/safe"):this.initGtCaptcha()},onKeyup(t){13==t.keyCode&&i()(".login_btn").click()},initGtCaptcha(){this.$http.get(this.host+this.api.uc.captcha).then(function(t){window.initGeetest({gt:t.body.gt,challenge:t.body.challenge,offline:!t.body.success,new_captcha:t.body.new_captcha,product:"bind",width:"100%"},this.handler)})},handler(t){t.onReady(()=>{i()("#wait").hide()}).onSuccess(()=>{(this._captchaResult=t.getValidate())?this.handleSubmit("formInline"):this.$Message.error("请完成验证")}),i()(".login_btn").click(()=>{let t=this.formInline.user,e=/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(t),n=this.formInline.password.length>=6;(!e||!n)&&this.$Message.error("请填写完整的信息"),this.handleSubmit("formInline")})},logout(){this.$http.post(this.host+"/uc/logout",{}).then(t=>{0==t.body.code&&(localStorage.setItem("MEMBER",JSON.stringify(null)),localStorage.setItem("TOKEN",null),localStorage.removeItem("USERKEY",null))})},handleSubmit(t){this.$refs[t].validate(t=>{if(t){var e={};e.username=this.formInline.user,e.password=this.formInline.password,this.$http.post(this.host+this.api.uc.login,e).then(t=>{var e=t.body;0==e.code?(this.$Message.success(this.$t("uc.login.success")),this.$store.commit("setMember",t.body.data),null!=this.$route.query.key&&""!=this.$route.query.key&&localStorage.setItem("USERKEY",this.$route.query.key),this.$router.push("/uc/safe")):this.$Message.error(e.message)})}})}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_form"},[n("div",{staticClass:"login_right"},[n("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[n("div",{staticClass:"login_title gold"},[t._v(t._s(t.$t("uc.login.login")))]),t._v(" "),n("FormItem",{attrs:{prop:"user"}},[n("Input",{staticClass:"user",attrs:{name:"user",type:"text",placeholder:t.$t("uc.login.usertip")},model:{value:t.formInline.user,callback:function(e){t.$set(t.formInline,"user",e)},expression:"formInline.user"}})],1),t._v(" "),n("FormItem",{staticClass:"password",attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:t.$t("uc.login.pwdtip")},on:{"on-keyup":t.onKeyup},model:{value:t.formInline.password,callback:function(e){t.$set(t.formInline,"password",e)},expression:"formInline.password"}})],1),t._v(" "),n("p",{staticClass:"hide",attrs:{id:"notice"}},[t._v(t._s(t.$t("uc.login.validatemsg")))]),t._v(" "),n("p",{staticStyle:{height:"30px"}},[n("router-link",{staticStyle:{color:"#979797",float:"right","padding-right":"10px","font-size":"12px"},attrs:{to:"/findPwd"}},[t._v("\n          "+t._s(t.$t("uc.login.forget"))+"\n        ")])],1),t._v(" "),n("FormItem",{staticStyle:{"margin-bottom":"15px"}},[n("Button",{staticClass:"login_btn"},[t._v(t._s(t.$t("uc.login.login")))])],1),t._v(" "),n("div",{staticClass:"to_register"},[n("span",[t._v(t._s(t.$t("uc.login.noaccount")))]),t._v(" "),n("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("uc.login.goregister")))])],1)],1)],1)])},staticRenderFns:[]};var a=n("VU/8")(r,s,!1,function(t){n("bhBr"),n("bgBR"),n("B2er")},"data-v-644e0ed2",null);e.default=a.exports},B2er:function(t,e){},GnUe:function(t,e,n){"use strict";!function(t){if(void 0===t)throw new Error("Geetest requires browser environment");var e=t.document,n=t.Math,o=e.getElementsByTagName("head")[0];function i(t){this._obj=t}function r(t){var e=this;new i(t)._each(function(t,n){e[t]=n})}i.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},r.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return s(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(t){var e=this;new i(t)._each(function(t,n){e[t]=n})}};var s=function(t){return"string"==typeof t},a=function(t){return"object"==typeof t&&null!==t},c={},l={},u=function(t,e,n,o){e=function(t){return t.replace(/^https?:\/\/|\/$/g,"")}(e);var r=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t}(n)+function(t){if(!t)return"";var e="?";return new i(t)._each(function(t,n){(s(n)||function(t){return"number"==typeof t}(n)||function(t){return"boolean"==typeof t}(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}),"?"===e&&(e=""),e.replace(/&$/,"")}(o);return e&&(r=t+e+r),r},p=function(t,n,i,r,s){var a=function(c){!function(t,n){var i=e.createElement("script");i.charset="UTF-8",i.async=!0,i.onerror=function(){n(!0)};var r=!1;i.onload=i.onreadystatechange=function(){r||i.readyState&&"loaded"!==i.readyState&&"complete"!==i.readyState||(r=!0,setTimeout(function(){n(!1)},0))},i.src=t,o.appendChild(i)}(u(t,n[c],i,r),function(t){t?c>=n.length-1?s(!0):a(c+1):s(!1)})};a(0)},f=function(e,o,i,r){if(a(i.getLib))return i._extend(i.getLib),void r(i);if(i.offline)r(i._get_fallback_config());else{var s="geetest_"+(parseInt(1e4*n.random())+(new Date).valueOf());t[s]=function(e){"success"==e.status?r(e.data):e.status?r(i._get_fallback_config()):r(e),t[s]=void 0;try{delete t[s]}catch(t){}},p(i.protocol,e,o,{gt:i.gt,callback:s},function(t){t&&r(i._get_fallback_config())})}},d=function(t,e){var n={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};(t.Geetest||e.getElementById("gt_lib"))&&(l.slide="loaded"),t.initGeetest=function(e,n){var o=new r(e);e.https?o.protocol="https://":e.protocol||(o.protocol=t.location.protocol+"//"),"050cffef4ae57b5d5e529fea9540b0d1"!==e.gt&&"3bd38408ae4af923ed36e13819b14d42"!==e.gt||(o.apiserver="yumchina.geetest.com/",o.api_server="yumchina.geetest.com"),a(e.getType)&&o._extend(e.getType),f([o.api_server||o.apiserver],o.typePath,o,function(e){var i=e.type,r=function(){o._extend(e),n(new t.Geetest(o))};c[i]=c[i]||[];var s=l[i]||"init";"init"===s?(l[i]="loading",c[i].push(r),p(o.protocol,e.static_servers||e.domains,e[i]||e.path,null,function(t){if(t)l[i]="fail",d("networkError",o);else{l[i]="loaded";for(var e=c[i],n=0,r=e.length;n<r;n+=1){var s=e[n];"function"==typeof s&&s()}c[i]=[]}})):"loaded"===s?r():"fail"===s?d("networkError",o):"loading"===s&&c[i].push(r)})}}(window)},bgBR:function(t,e){},bhBr:function(t,e){}});